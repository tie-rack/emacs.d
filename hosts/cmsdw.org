* Work computer settings

** Doing things based on frame size

I have my laptop screen and my external montior, and there are
configurations I want to be different between them. This macro helps.

#+begin_src emacs-lisp
(defmacro tierack/little-frame-big-frame
    (name small big)
  "Eval the first form if the frame is small (on the laptop
  screen), the second if the frame is big (on the external
  monitor)."
  (let ((fn-name (make-symbol (concat "tierack/" (symbol-name name)))))
    `(progn
       (defun ,fn-name
           ()
         (if (< (frame-width) 165)
             ,small
           ,big))
       (add-hook 'window-configuration-change-hook
                 (quote ,fn-name)))))
#+end_src

** Font

#+begin_src emacs-lisp
(set-frame-font "Inconsolata")
(set-face-attribute 'default nil :height 160)
#+end_src

*** Adjusting font size based on frame size

#+begin_src emacs-lisp
(tierack/little-frame-big-frame
 drive-font-size-from-frame-size
 (set-face-attribute 'default (selected-frame) :height 160)
 (set-face-attribute 'default (selected-frame) :height 180))
#+end_src

** Transparency

I only want it on the external monitor

#+begin_src emacs-lisp
(tierack/little-frame-big-frame
 transparency-when-big
 (set-frame-parameter (selected-frame) 'alpha 100)
 (set-frame-parameter (selected-frame) 'alpha '(92 . 70)))
#+end_src

** Rust

#+begin_src emacs-lisp
(add-to-list 'exec-path "/Users/cms/.cargo/bin")
#+end_src

** SQL

#+begin_src emacs-lisp
(add-to-list 'exec-path "/Applications/Postgres.app/Contents/Versions/9.5/bin")
#+end_src

Fix the prompt for Postgres (at least). Taken from [[https://www.emacswiki.org/emacs/SqlMode][EmacsWiki: SqlMode]].

#+begin_src emacs-lisp
(defun tierack/set-psql-prompt-regexps ()
  (setq sql-prompt-regexp "^[_[:alpha:]]*[=][#>] ")
  (setq sql-prompt-cont-regexp "^[_[:alpha:]]*[-][#>] "))

(add-hook 'sql-interactive-mode-hook
          #'tierack/set-psql-prompt-regexps)
#+end_src

Let's try sqlup.

#+begin_src emacs-lisp
(tierack/require-package 'sqlup-mode)

(add-hook 'sql-interactive-mode-hook 'sqlup-mode)
(global-set-key "\C-csu" 'sqlup-capitalize-keywords-in-region)
#+end_src

** PATH stuff

This is where I am: build up the =exec-path= and, as the very last
thing done during startup, use that to set the PATH.

#+begin_src emacs-lisp
(add-to-list 'exec-path "/usr/local/bin")
(add-to-list 'exec-path "/usr/local/sbin")
(add-to-list 'exec-path "/Users/cms/bin")

(require 's)
(setenv "PATH" (s-join ":" exec-path))
#+end_src
